name = "record-mcp"
main = "dist/worker-oauth.js"
compatibility_date = "2024-11-16"
node_compat = true

# Account-level secrets (set via wrangler secret put or GitHub Actions)
# OAuth 2.1 compliant authentication:
# - API_KEY: Fallback simple auth (optional)
# - JWT_SECRET: Secret for validating JWT tokens
# - OAUTH_ISSUER: Your OAuth issuer URL (e.g., https://your-domain.auth0.com)

# R2 bucket bindings
[[r2_buckets]]
binding = "RECORD_BUCKET"
bucket_name = "record-mcp-data"
preview_bucket_name = "record-mcp-data-preview"

# Environment variables
# NOTE: Secrets should be set via wrangler secret put or GitHub Actions
# - API_KEY (optional fallback)
# - JWT_SECRET (required for OAuth 2.1)
# - OAUTH_ISSUER (required for OAuth 2.1)
[vars]
NODE_ENV = "production"
STORAGE_PROVIDER = "r2"
OAUTH_ISSUER = "https://record-mcp.workers.dev"  # Update with your actual domain
